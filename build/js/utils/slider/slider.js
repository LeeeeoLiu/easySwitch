define(["jquery","lazyload"],function($,lazyload){var my={},constructorFunName="Slider",pluginName="slider";my[constructorFunName]=function(container,options){var settings=$.extend(!0,{},$.fn[pluginName].defaults,options);for(var prop in settings)settings.hasOwnProperty(prop)&&(this[prop]=settings[prop]);this.container=container,this.body=this.container.find(this.domSelector.body),this.box=this.container.find(this.domSelector.box),this.prevBtn=this.container.find(this.domSelector.prevBtn),this.nextBtn=this.container.find(this.domSelector.nextBtn),this.width=this.width||(this.itemWidth+this.gutter)*this.moveItems-this.gutter,this.isAnimating=!1,this.init()},my[constructorFunName].prototype={constructor:my[constructorFunName],init:function(){return this.render().handler(),this.btnShowHide(),this.lazyloadImg(),this},lazyloadImg:function(){this.container.find("img").lazyload({})},handler:function(){var _this=this;return this.prevBtn.on("click",function(e){e.preventDefault(),_this.move("right")}),this.nextBtn.on("click",function(e){e.preventDefault(),_this.move("left")}),this},render:function(){return this.body.css({width:this.width+"px",height:this.height+"px"}),this.container.find(this.domSelector.item).css({width:this.itemWidth+"px",height:this.height+"px"}),this},getOffset:function(){return Math.abs(parseInt(this.box.css("left"),10))},getAllItems:function(){return this.container.find(this.domSelector.item).length},maxItems:function(){var max=(this.width+this.gutter)/(this.itemWidth+this.gutter);return Math.floor(max)},toStart:function(){return 0===this.getOffset()},endOffset:function(){var allItemOffset=this.getAllItems()*(this.itemWidth+this.gutter)-this.gutter;return allItemOffset-this.width},toEnd:function(){return this.getAllItems()<=this.maxItems()?!0:this.getOffset()===this.endOffset()?!0:!1},prevItems:function(){var restItems=(this.getOffset()+this.gutter)/(this.itemWidth+this.gutter);return 0>=restItems?0:(restItems=restItems>this.maxItems()?this.maxItems():"start","max"!==this.moveItems&&"start"!==restItems?this.moveItems:restItems)},nextItems:function(){var restItems=this.getAllItems()-(this.getOffset()+this.gutter)/(this.itemWidth+this.gutter)-this.maxItems();return 0>=restItems?0:(restItems=restItems>this.maxItems()?this.maxItems():"end","max"!==this.moveItems&&"end"!==restItems?this.moveItems:restItems)},moveUnits:function(items){return items&&"string"!=typeof items?(items=Math.floor(items),items*(this.itemWidth+this.gutter)):!1},btnShowHide:function(){this.toStart()?this.prevBtn.hide():this.prevBtn.show(),this.toEnd()?this.nextBtn.hide():this.nextBtn.show()},move:function(direction){var to=0,_this=this;return"left"===direction?to=isNaN(this.nextItems())?(this.itemWidth+this.gutter)*this.getAllItems()-this.gutter-this.width:this.getOffset()+this.moveUnits(this.nextItems()):"right"===direction&&(to=isNaN(this.prevItems())?0:this.getOffset()-this.moveUnits(this.prevItems())),this.isAnimating||(this.isAnimating=!0,$.when(this.animate(to)).then(function(){_this.isAnimating=!1,_this.btnShowHide(),_this.lazyloadImg()})),this},animate:function(to){return this.box.animate({left:-to+"px"},this.duration).promise()}},$.fn[pluginName]=function(opts){if("string"==typeof opts){if("api"===opts)return $(this).data("plugin-"+pluginName);throw new Error('error string ,here supports "api" only!')}return this.each(function(){var that=$(this),s1=new my[constructorFunName](that,opts);return that.data("plugin-"+pluginName)?void 0:that.data("plugin-"+pluginName,s1)})},$.fn[pluginName].defaults={domSelector:{wrapper:".m-slider",box:".slider-box",item:".slider-item",body:".inner",move:".move",prevBtn:".move .prev",nextBtn:".move .next"},moveItems:"max",duration:400,height:300,itemWidth:200,gutter:10}});